<!DOCTYPE html>
<html lang="zxx">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="Fashi Template">
    <meta name="keywords" content="Fashi, unica, creative, html">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Sweet Mist</title>

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css?family=Muli:300,400,500,600,700,800,900&display=swap" rel="stylesheet">

    <!-- Css Styles -->
    <link rel="stylesheet" href="/static/css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="/static/css/font-awesome.min.css" type="text/css">
    <link rel="stylesheet" href="/static/css/themify-icons.css" type="text/css">
    <link rel="stylesheet" href="/static/css/elegant-icons.css" type="text/css">
    <link rel="stylesheet" href="/static/css/owl.carousel.min.css" type="text/css">
    <link rel="stylesheet" href="/static/css/nice-select.css" type="text/css">
    <link rel="stylesheet" href="/static/css/jquery-ui.min.css" type="text/css">
    <link rel="stylesheet" href="/static/css/slicknav.min.css" type="text/css">
    <link rel="stylesheet" href="/static/css/style.css" type="text/css">
</head>

<body>
    {% include "header.html" %}

    <!-- Breadcrumb Section Begin -->
    <div class="breacrumb-section">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="breadcrumb-text">
                        <a href="#"><i class="fa fa-home"></i> Home</a>
                        <span>Login</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Breadcrumb Form Section Begin -->

    <!-- Content wrapper -->
    <div class="content-wrapper mt-3">
        <!-- Content -->
        <div class="container-xxl flex-grow-1 container-p-y">

            <!-- <div class="d-flex flex-column flex-sm-row align-items-center justify-content-sm-between mb-6 text-center text-sm-start gap-2">
                <div class="mb-2 mb-sm-0">
                    <h4 class="mb-1">
                        Customer ID #634759
                    </h4>
                    <p class="mb-0">
                        Aug 17, 2020, 5:48 (ET)
                    </p>
                </div>
                <button type="button" class="btn btn-outline-danger delete-customer">Delete Customer</button>
            </div> -->

            <div class="row mb-5">
                <!-- Customer-detail Sidebar -->
                <div class="col-xl-4 col-lg-5 col-md-5 mt-3">
                    <!-- Customer-detail Card -->
                    <div class="card mb-6">
                        <div class="card-body pt-12">
                            <div class="customer-avatar-section">
                                <div class="d-flex align-items-center flex-column mt-4 mb-5">
                                    <!-- <img class="img-fluid rounded mb-4" src="../../assets/img/avatars/1.png" height="120" width="120" alt="User avatar" /> -->
                                    <div class="customer-info text-center mb-6">
                                        <h5 class="mb-0">{{user_data.first_name}} {{user_data.last_name}}</h5>
                                        <span>Customer ID #{{user_data.user_id}}</span>
                                    </div>
                                </div>
                            </div>

                            <!-- <div class="d-flex justify-content-around flex-wrap mb-6 gap-0 gap-md-3 gap-lg-4">
                            <div class="d-flex align-items-center gap-4 me-5">
                                <div class="avatar">
                                <div class="avatar-initial rounded bg-label-primary"><i class='ri-shopping-cart-line ri-24px'></i>
                                </div>
                                </div>
                                <div>
                                <h5 class="mb-0">184</h5>
                                <span>Orders</span>
                                </div>
                            </div>
                            <div class="d-flex align-items-center gap-4">
                                <div class="avatar">
                                <div class="avatar-initial rounded bg-label-primary"><i class='ri-money-dollar-circle-line ri-24px'></i>
                                </div>
                                </div>
                                <div>
                                <h5 class="mb-0">$12,378</h5>
                                <span>Spent</span>
                                </div>
                            </div>
                        </div> -->

                            <div class="info-container">
                                <h5 class="border-bottom text-capitalize pb-4 mt-6 mb-4">Details</h5>
                                <ul class="list-unstyled mb-6">
                                    <!-- <li class="mb-2">
                                        <span class="h6 me-1">Username:</span>
                                        <span>lorine.hischke</span>
                                    </li> -->
                                    <li class="mb-2">
                                        <span class="h6 me-1">Email:</span>
                                        <span>{{user_data.email}}</span>
                                    </li>
                                    <!-- <li class="mb-2">
                                        <span class="h6 me-1">Status:</span>
                                        <span class="badge bg-label-success rounded-pill">Active</span>
                                    </li> -->
                                    <li class="mb-2">
                                        <span class="h6 me-1">Contact:</span>
                                        <span>{{user_data.number}}</span>
                                    </li>

                                    <li class="mb-2">
                                        <span class="h6 me-1">Address:</span>
                                        <!-- <span>USA</span> -->
                                        <span>{{user_data.primary_address}},</span>
                                        <span>{{user_data.secondary_address}},</span>
                                        <span>{{user_data.city}}, {{user_data.state}},</span>
                                        <span>{{user_data.country}},</span>
                                        <span>{{user_data.pincode}}.</span>
                                    </li>
                                </ul>
                                <div class="d-flex justify-content-center">
                                    <a class="btn btn-primary w-100 text-white" data-bs-target="#editUser"
                                        data-bs-toggle="modal">Edit Details
                                    </a>
                                </div>
                                <div class="d-flex justify-content-center mt-3">
                                    <button class="btn btn-danger w-100" data-bs-target="#logoutModal" data-bs-toggle="modal">Log out</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- /Customer-detail Card -->
                </div>
                <!--/ Customer Sidebar -->

                <!-- Customer Content -->
                <div class="col-xl-8 col-lg-7 col-md-7 mt-3">
                    <!-- Invoice table -->
                    <!-- <div class="card mb-6"> -->
                        <div class="table-responsive mb-4">
                            <div class="accordion" id="orderAccordion">
                                <!-- First Accordion Item (Open by default) -->
                                {% for order in all_orders reversed %}
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="orderHeading{{forloop.counter}}">
                                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#orderCollapse{{forloop.counter}}"
                                            aria-expanded="true" aria-controls="orderCollapse{{forloop.counter}}">
                                            Order #{{order.order_id}} - {{order.order_date}}
                                        </button>
                                    </h2>
                                    <div id="orderCollapse{{forloop.counter}}" class="accordion-collapse collapse show" aria-labelledby="orderHeading{{forloop.counter}}"
                                        data-bs-parent="#orderAccordion">
                                        <div class="accordion-body">
                                            <span>Status: <span class="badge badge-secondary rounded-pill" text-capitalized="">Out for delivery</span></span>
                                            <br>
                                            <span>Spent: â‚¹ {{order.total_price}}</span>
                                            <br>
                                            <a href="{% url 'order_detail-list' %}?order_id={{order.order_id}}" class="btn btn-outline-primary m-1">View Order</a>
                                            <a href="{% url 'invoice-list' %}?order_id={{order.order_id}}" class="btn btn-outline-dark m-1">Get invoice</a>
                                            <br>
                                            <div class="nested-table">
                                                <table class="table">
                                                    <thead>
                                                        <tr>
                                                            <th>Item</th>
                                                            <th>Quantity</th>
                                                            <th>Price</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        {% for item in order.items %}
                                                        <tr>
                                                            <td>{{item.title}}</td>
                                                            <td>{{item.qty}}</td>
                                                            <td>{{item.total_price}}</td>
                                                        </tr>
                                                        {% endfor %}
                                                    </tbody>
                                                </table>
                                            </div>
                                            <div>
                                                <!-- <button class="btn btn-sm btn-icon btn-text-secondary waves-effect rounded-pill dropdown-toggle hide-arrow"
                                                    data-bs-toggle="dropdown" fdprocessedid="6ieqff">
                                                    <i class="ri-more-2-line ri-22px"></i>
                                                </button>
                                                <div class="dropdown-menu dropdown-menu-end m-0">
                                                    <a href="javascript:;" class="dropdown-item">View</a>
                                                    <a href="javascript:;" class="dropdown-item delete-record">Delete</a>
                                                </div> -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {% endfor %}

                            </div>
                        </div>
                    <!-- </div> -->
                    <!-- /Invoice table -->
                </div>
                <!--/ Customer Content -->
            </div>

            <!-- Modal -->
            <!-- Edit User Modal -->
            <div class="modal fade" id="editUser" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog modal-lg modal-simple modal-edit-user">
                    <div class="modal-content">
                        <div class="modal-body m-3 p-0">
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            <div class="text-center mb-6">
                                <h4 class="mb-2">Edit Your Information</h4>
                                <p class="mb-6">Updating user details will receive a privacy audit.</p>
                            </div>
                            <form id="editUserForm" class="row g-3">
                                <div class="alert alert-danger" role="alert" id="erroralert" style="display: none;">
                                    Error Occurred - Please try again later!
                                </div>
                                
                                <div class="col-12 col-md-6">
                                    <div class="form-floating form-floating-outline">
                                        <input type="text" id="modalEditUserFirstName" name="modalEditUserFirstName"
                                            class="form-control" value="{{user_data.first_name}}" placeholder="First Name" required/>
                                        <label for="modalEditUserFirstName">First Name</label>
                                    </div>
                                </div>
                                
                                <div class="col-12 col-md-6">
                                    <div class="form-floating form-floating-outline">
                                        <input type="text" id="modalEditUserLastName" name="modalEditUserLastName"
                                            class="form-control" value="{{user_data.last_name}}" placeholder="Last Name" required/>
                                        <label for="modalEditUserLastName">Last Name</label>
                                    </div>
                                </div>
                                
                                <!-- <div class="col-12">
                                    <div class="form-floating form-floating-outline">
                                        <input type="text" id="modalEditUserName" name="modalEditUserName"
                                            class="form-control" value="oliver.queen" placeholder="oliver.queen" />
                                        <label for="modalEditUserName">Username</label>
                                    </div>
                                </div> -->
                                
                                <div class="col-12 col-md-6">
                                    <div class="form-floating form-floating-outline">
                                        <input readonly type="text" id="modalEditUserEmail" name="modalEditUserEmail"
                                            class="form-control" value="{{user_data.email}}"
                                            placeholder="youremail@email.com" />
                                        <label for="modalEditUserEmail">Email</label>
                                    </div>
                                </div>
                                
                                <!-- <div class="col-12 col-md-6">
                                    <div class="form-floating form-floating-outline">
                                        <select id="modalEditUserStatus" name="modalEditUserStatus" class="form-select"
                                            aria-label="Default select example">
                                            <option value="1" selected>Active</option>
                                            <option value="2">Inactive</option>
                                            <option value="3">Suspended</option>
                                        </select>
                                        <label for="modalEditUserStatus">Status</label>
                                    </div>
                                </div> -->
                                
                                <!-- <div class="col-12 col-md-6">
                                    <div class="form-floating form-floating-outline">
                                        <input type="text" id="modalEditTaxID" name="modalEditTaxID"
                                            class="form-control modal-edit-tax-id" placeholder="123 456 7890" />
                                        <label for="modalEditTaxID">Tax ID</label>
                                    </div>
                                </div> -->
                                
                                <div class="col-12 col-md-6">
                                    <div class="input-group input-group-merge">
                                        <!-- <span class="input-group-text">US (+1)</span> -->
                                        <div class="form-floating form-floating-outline">
                                            <input readonly type="text" id="modalEditUserPhone" name="modalEditUserPhone"
                                                class="form-control phone-number-mask" value="{{user_data.number}}"
                                                placeholder="{{user_data.number}}" />
                                            <label for="modalEditUserPhone">Phone Number</label>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-12">
                                    <div class="form-floating form-floating-outline">
                                        <input type="text" id="modalEditUserPrimaryAddress" name="modalEditUserPrimaryAddress"
                                            class="form-control" value="{{user_data.primary_address}}"
                                            placeholder="Primary Address" required/>
                                        <label for="modalEditUserPrimaryAddress">Primary Address</label>
                                    </div>
                                </div>

                                <div class="col-12">
                                    <div class="form-floating form-floating-outline">
                                        <input type="text" id="modalEditUserSecondaryAddress" name="modalEditUserSecondaryAddress"
                                            class="form-control" value="{{user_data.secondary_address}}"
                                            placeholder="Secondary Address" />
                                        <label for="modalEditUserSecondaryAddress">Secondary Address</label>
                                    </div>
                                </div>

                                <div class="col-12 col-md-6">
                                    <div class="form-floating form-floating-outline">
                                        <input type="text" id="modalEditUserCity" name="modalEditUserCity"
                                            class="form-control" value="{{user_data.city}}"
                                            placeholder="City" required/>
                                        <label for="modalEditUserCity">City</label>
                                    </div>
                                </div>

                                <div class="col-12 col-md-6">
                                    <div class="form-floating form-floating-outline">
                                        <input type="text" id="modalEditUserState" name="modalEditUserState"
                                            class="form-control" value="{{user_data.state}}"
                                            placeholder="State" required/>
                                        <label for="modalEditUserState">State</label>
                                    </div>
                                </div>

                                <div class="col-12 col-md-6">
                                    <div class="form-floating form-floating-outline">
                                        <input type="text" id="modalEditUserCountry" name="modalEditUserCountry"
                                            class="form-control" value="{{user_data.country}}"
                                            placeholder="Country" required/>
                                        <label for="modalEditUseCountry">Country</label>
                                    </div>
                                </div>

                                <div class="col-12 col-md-6">
                                    <div class="form-floating form-floating-outline">
                                        <input type="text" id="modalEditUserPinCode" name="modalEditUserPinCode"
                                            class="form-control" value="{{user_data.pincode}}"
                                            placeholder="PinCode" required/>
                                        <label for="modalEditUsePinCode">Pin Code</label>
                                    </div>
                                </div>

                                <!-- <div class="col-12 col-md-6">
                                    <div class="form-floating form-floating-outline">
                                        <select id="modalEditUserLanguage" name="modalEditUserLanguage"
                                            class="select2 form-select" multiple>
                                            <option value="">Select</option>
                                            <option value="english" selected>English</option>
                                            <option value="spanish">Spanish</option>
                                            <option value="french">French</option>
                                            <option value="german">German</option>
                                            <option value="dutch">Dutch</option>
                                            <option value="hebrew">Hebrew</option>
                                            <option value="sanskrit">Sanskrit</option>
                                            <option value="hindi">Hindi</option>
                                        </select>
                                        <label for="modalEditUserLanguage">Language</label>
                                    </div>
                                </div>
                                
                                <div class="col-12 col-md-6">
                                    <div class="form-floating form-floating-outline">
                                        <select id="modalEditUserCountry" name="modalEditUserCountry"
                                            class="select2 form-select" data-allow-clear="true">
                                            <option value="">Select</option>
                                            <option value="Australia">Australia</option>
                                            <option value="Bangladesh">Bangladesh</option>
                                            <option value="Belarus">Belarus</option>
                                            <option value="Brazil">Brazil</option>
                                            <option value="Canada">Canada</option>
                                            <option value="China">China</option>
                                            <option value="France">France</option>
                                            <option value="Germany">Germany</option>
                                            <option value="India" selected>India</option>
                                            <option value="Indonesia">Indonesia</option>
                                            <option value="Israel">Israel</option>
                                            <option value="Italy">Italy</option>
                                            <option value="Japan">Japan</option>
                                            <option value="Korea">Korea, Republic of</option>
                                            <option value="Mexico">Mexico</option>
                                            <option value="Philippines">Philippines</option>
                                            <option value="Russia">Russian Federation</option>
                                            <option value="South Africa">South Africa</option>
                                            <option value="Thailand">Thailand</option>
                                            <option value="Turkey">Turkey</option>
                                            <option value="Ukraine">Ukraine</option>
                                            <option value="United Arab Emirates">United Arab Emirates</option>
                                            <option value="United Kingdom">United Kingdom</option>
                                            <option value="United States">United States</option>
                                        </select>
                                        <label for="modalEditUserCountry">Country</label>
                                    </div>
                                </div>
                                
                                <div class="col-12">
                                    <div class="form-check form-switch">
                                        <input type="checkbox" class="form-check-input" id="editBillingAddress" />
                                        <label for="editBillingAddress" class="text-heading">Use as a billing
                                            address?</label>
                                    </div>
                                </div> -->
                                
                                <div class="col-12 text-center">
                                    <button type="button" onclick="EditAccountData()" class="btn btn-primary me-3">Submit</button>
                                    <button type="reset" class="btn btn-outline-secondary" data-bs-dismiss="modal"
                                        aria-label="Close">Cancel</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <!--/ Edit User Modal -->

            <!-- Add New Credit Card Modal -->
            <div class="modal fade" id="upgradePlanModal" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered modal-simple modal-upgrade-plan">
                    <div class="modal-content">
                        <div class="modal-body pt-md-0 px-0">
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            <div class="text-center mb-6">
                                <h4 class="mb-2">Upgrade Plan</h4>
                                <p>Choose the best plan for user.</p>
                            </div>
                            <form id="upgradePlanForm" class="row g-5 d-flex align-items-center"
                                onsubmit="return false">
                                <div class="col-sm-9">
                                    <select id="choosePlan" name="choosePlan" class="form-select form-select-sm"
                                        aria-label="Choose Plan">
                                        <option selected>Choose Plan</option>
                                        <option value="standard">Standard - $99/month</option>
                                        <option value="exclusive">Exclusive - $249/month</option>
                                        <option value="Enterprise">Enterprise - $499/month</option>
                                    </select>
                                </div>
                                <div class="col-sm-3 d-flex align-items-end">
                                    <button type="submit" class="btn btn-primary">Upgrade</button>
                                </div>
                            </form>
                        </div>
                        <hr class="mx-md-n5 mx-n3">
                        <div class="modal-body pb-md-0 px-0">
                            <p class="mb-0">User current plan is standard plan</p>
                            <div class="d-flex justify-content-between align-items-center flex-wrap">
                                <div class="d-flex justify-content-center me-2 mt-3">
                                    <sup class="h5 pricing-currency pt-1 mt-2 mb-0 me-1 text-primary">$</sup>
                                    <h1 class="display-3 mb-0 text-primary">99</h1>
                                    <sub class="h6 pricing-duration mt-auto mb-2 pb-1 text-body">/month</sub>
                                </div>
                                <button class="btn btn-outline-danger cancel-subscription mt-4">Cancel
                                    Subscription</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--/ Add New Credit Card Modal -->

            <div class="modal fade" id="logoutModal" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h1 class="modal-title fs-5" id="logoutModalLabel">Confirm Log Out?</h1>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                      Are you sure you want to log out?
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                      <a href="{% url 'logout-list' %}" class="btn btn-danger">Log Out</a>
                    </div>
                  </div>
                </div>
              </div>

            <!-- /Modal -->
        </div>
        <!-- / Content -->

        <div class="content-backdrop fade"></div>
    </div>
    <!-- Content wrapper -->



    {% include "related_products.html" %}
    {% include "footer.html" %}

    <!-- Js Plugins -->
    <script src="/static/js/jquery-3.3.1.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/jquery-ui.min.js"></script>
    <script src="/static/js/jquery.countdown.min.js"></script>
    <script src="/static/js/jquery.nice-select.min.js"></script>
    <script src="/static/js/jquery.zoom.min.js"></script>
    <script src="/static/js/jquery.dd.min.js"></script>
    <script src="/static/js/jquery.slicknav.js"></script>
    <script src="/static/js/owl.carousel.min.js"></script>
    <script src="/static/js/main.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

    <script>
        async function EditAccountData() {
            var form = document.getElementById('editUserForm');
            if (form.reportValidity()) {
                const first_name = document.getElementById('modalEditUserFirstName').value;
                const last_name = document.getElementById('modalEditUserLastName').value;
                const primary_address = document.getElementById('modalEditUserPrimaryAddress').value;
                const secondary_address = document.getElementById('modalEditUserSecondaryAddress').value;
                const city = document.getElementById('modalEditUserCity').value;
                const state = document.getElementById('modalEditUserState').value;
                const country = document.getElementById('modalEditUserCountry').value;
                const pincode = document.getElementById('modalEditUserPinCode').value;

                try {
                    const url = `{% url 'edit_account-list' %}`;
                    const csrftoken = '{{ csrf_token }}';
                    const data = {
                        'first_name':first_name,
                        'last_name':last_name,
                        'primary_address':primary_address,
                        'secondary_address':secondary_address,
                        'city':city,
                        'state':state,
                        'country':country,
                        'pincode':pincode,
                    };

                    const response = await fetch(url, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-CSRFToken': csrftoken
                        },
                        body: JSON.stringify(data)
                    });

                    const response_data = await response.json();
                    console.log(response_data)

                    if (response_data.success) {
                        location.reload();

                    } else {
                        const error_alert_ele = document.getElementById('erroralert');
                        error_alert_ele.style.display = 'block';
                    }

                } catch (error) {
                    console.error(error);
                }

            }

        }
    
    </script>
</body>

</html>